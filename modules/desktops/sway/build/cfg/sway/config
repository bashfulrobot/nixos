# Default config for sway
#
# Copy this to ~/.config/sway/config and edit it to your liking.
#
# Read `man 5 sway` for a complete reference.

### Variables
#
# Logo key. Use Mod1 for Alt.
set $mod Mod4
# Home row direction keys, like vim
set $left h
set $down j
set $up k
set $right l
# Your preferred terminal emulator
set $term foot
# Your preferred application launcher
# Note: pass the final command to swaymsg so that the resulting window can be opened
# on the original workspace that the command was run on.
set $menu "rofi -show drun -display-drun '>' -theme-str 'window {width: 20%;}'"
set $ssh-menu "rofi -show ssh -display-drun '>' -theme-str 'window {width: 20%;}'"

### Logout Menu
#
# config file in .config/waylogout/config
set $pmenu waylogout

### Kanshi Service
# give sway a little time to startup before starting kanshi.
exec sleep 5; systemctl --user start kanshi.service

### DBUS Sway Fixes
#
exec_always dbus-sway-environment

### Autostart Apps
#
# 1password
exec swaymsg "workspace 0; exec /run/current-system/sw/bin/dex /run/current-system/sw/share/applications/1password.desktop

### Lock Screen
#
# done through waylogout

### Output configuration
#
# Default wallpaper (more resolutions are available in @datadir@/backgrounds/sway/)
output * bg ~/Pictures/wallpapers/red-skulls.jpg fill
#
# Example configuration:
#
#   output HDMI-A-1 resolution 1920x1080 position 1920,0
#
# You can get the names of your outputs by running: swaymsg -t get_outputs

### Idle configuration
#
# Example configuration:
#
# exec swayidle -w \
#  timeout 300 'swaylock -f -c 000000' \
#  timeout 600 'swaymsg "output * power off"' resume 'swaymsg "output * power on"' \
#  before-sleep 'swaylock -f -c 000000'
#
# This will lock your screen after 300 seconds of inactivity, then turn off
# your displays after another 300 seconds, and turn your screens back on when
# resumed. It will also lock your screen before your computer goes to sleep.

### Input configuration
#
# Get device with: swaymsg -t get_inputs
# Example configuration:
#
input "1267:12970:VEN_04F3:00_04F3:32AA_Touchpad" {
dwt enabled
tap enabled
natural_scroll disabled
middle_emulation enabled
}
#
# You can get the names of your inputs by running: swaymsg -t get_inputs
# Read `man 5 sway-input` for more information about this section.

### Key bindings
#
# Read - https://mark.stosberg.com/sway-keybindings/
# may adopt

## System Level
#
# Kill focused window
bindsym $mod+q kill
# ---
# Start your launcher
bindsym $mod+space exec $menu
bindsym $mod+Alt+space exec $ssh-menu
# ---
# Take Screenshots
bindsym $mod+Alt+p exec grimshot savecopy area
# Anotate Screenshots
bindsym $mod+Alt+a exec /etc/profiles/per-user/dustin/bin/screenshot-annotate.sh
# Power/Logout Menu
#
# bindsym $mod+p exec $pmenu
bindsym $mod+p exec $pmenu

# Turn monitor on/off
# turn on all displays:
bindsym --locked $mod+Alt+m output * dpms on
# turn off all displays:
bindsym --locked $mod+Shift+m output * dpms off

# ---
# Emulate a form of alt tab
bindsym Alt+Tab exec rofi -show window -show-icons -format '{w}' -theme-str 'window {width: 20%;}'
## Workspaces // Previous Window // <Alt> Tab ##
# bindsym Alt+Tab exec swayr switch-workspace
## Workspaces // Previous Window Menu // 🪟 Tab ##
# It's ordered by last use, and includes icons, app Ids and bold titles.
# bindsym $mod+Tab exec swayr switch-window
# ---
## Media Keys
#
# ---
## Media // Play/Pause Audio // ⏯️  ##
bindsym --locked XF86AudioPlay exec playerctl play-pause
bindsym --locked XF86AudioPause exec playerctl pause

## Media // Next Track //  ⏭️  ##
## Media // Prev Track // ⏮  ##
bindsym --locked XF86AudioNext exec playerctl next
bindsym --locked XF86AudioPrev exec playerctl previous

## Media // Volume Up // 🔊 ##
## Media // Volume Down // 🔉 ##
## Media // Volume Mute // 🔇 ##
# @DEFAULT_SINK@ is a useds by pactl to reference the default output, but it might
# not be the current output.
bindsym --locked XF86AudioRaiseVolume  exec pactl set-sink-volume @DEFAULT_SINK@ +3%
bindsym --locked XF86AudioLowerVolume  exec pactl set-sink-volume @DEFAULT_SINK@ -3%
bindsym --locked XF86AudioMute   exec pactl set-sink-mute @DEFAULT_SINK@ toggle

## Screen // Brightness Up // 🔆 ##
## Screen // Brightness Down // 🔅 ##
bindsym XF86MonBrightnessDown exec brightnessctl set 5%-
bindsym XF86MonBrightnessUp   exec brightnessctl set +5%

## Apps
#
# Start a terminal
bindsym $mod+Return exec $term
# ---
# Launch VSCode
bindsym $mod+Shift+e exec code
# ---
# Launch Browser
bindsym $mod+Shift+b exec brave
# ---
# Launch Browser
bindsym $mod+Shift+f exec nautilus

# Converty gmail URLS
# bindsym $mod+Shift+Ctrl+g exec gmail-url
bindsym $mod+Shift+g exec gmail-url

# Drag floating windows by holding down $mod and left mouse button.
# Resize them with right mouse button + $mod.
# Despite the name, also works for non-floating windows.
# Change normal to inverse to use left mouse button for resizing and right
# mouse button for dragging.
 floating_modifier $mod normal

# Reload the configuration file
bindsym $mod+Shift+c reload

# Exit sway (logs you out of your Wayland session)
bindsym $mod+Shift+Alt+e exec swaynag -t warning -m 'You pressed the exit shortcut. Do you really want to exit sway? This will end your Wayland session.' -B 'Yes, exit sway' 'swaymsg exit'
#
# Moving around:
#
# Move your focus around
bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right
# Or use $mod+[up|down|left|right]
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# Move the focused window with the same, but add Shift
bindsym $mod+Shift+$left move left
bindsym $mod+Shift+$down move down
bindsym $mod+Shift+$up move up
bindsym $mod+Shift+$right move right
# Ditto, with arrow keys
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right
#
# Workspaces:
#
# Switch to workspace
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
bindsym $mod+0 workspace number 10

#enable overlays with workspace keys
# bindsym --no-repeat $mod+1 workspace number 1; exec "echo 1 > /tmp/sovpipe"
# bindsym --no-repeat $mod+2 workspace number 2; exec "echo 1 > /tmp/sovpipe"
# bindsym --no-repeat $mod+3 workspace number 3; exec "echo 1 > /tmp/sovpipe"
# bindsym --no-repeat $mod+4 workspace number 4; exec "echo 1 > /tmp/sovpipe"
# bindsym --no-repeat $mod+5 workspace number 5; exec "echo 1 > /tmp/sovpipe"
# bindsym --no-repeat $mod+6 workspace number 6; exec "echo 1 > /tmp/sovpipe"
# bindsym --no-repeat $mod+7 workspace number 7; exec "echo 1 > /tmp/sovpipe"
# bindsym --no-repeat $mod+8 workspace number 8; exec "echo 1 > /tmp/sovpipe"
# bindsym --no-repeat $mod+9 workspace number 9; exec "echo 1 > /tmp/sovpipe"
# bindsym --no-repeat $mod+0 workspace number 10; exec "echo 1 > /tmp/sovpipe"

# bindsym --release $mod+1 exec "echo 0 > /tmp/sovpipe"
# bindsym --release $mod+2 exec "echo 0 > /tmp/sovpipe"
# bindsym --release $mod+3 exec "echo 0 > /tmp/sovpipe"
# bindsym --release $mod+4 exec "echo 0 > /tmp/sovpipe"
# bindsym --release $mod+5 exec "echo 0 > /tmp/sovpipe"
# bindsym --release $mod+6 exec "echo 0 > /tmp/sovpipe"
# bindsym --release $mod+7 exec "echo 0 > /tmp/sovpipe"
# bindsym --release $mod+8 exec "echo 0 > /tmp/sovpipe"
# bindsym --release $mod+9 exec "echo 0 > /tmp/sovpipe"
# bindsym --release $mod+0 exec "echo 0 > /tmp/sovpipe"

# Move focused container to workspace
bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9
bindsym $mod+Shift+0 move container to workspace number 10
# Note: workspaces can have any name you want, not just numbers.
# We just use 1-10 as the default.
#
# Layout stuff:
#
# You can "split" the current object of your focus with
# $mod+b or $mod+v, for horizontal and vertical splits
# respectively.
bindsym $mod+b splith
bindsym $mod+v splitv

# Switch the current container between different layout styles
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# Make the current focus fullscreen
bindsym $mod+f fullscreen

# Toggle the current focus between tiling and floating mode
bindsym $mod+Shift+space floating toggle

# Swap focus between the tiling area and the floating area
# bindsym $mod+space focus mode_toggle

# Move focus to the parent container
bindsym $mod+a focus parent
#
# Scratchpad:
#
# Sway has a "scratchpad", which is a bag of holding for windows.
# You can send windows there and get them back later.

# Move the currently focused window to the scratchpad
bindsym $mod+Shift+minus move scratchpad

# Show the next scratchpad window or hide the focused scratchpad window.
# If there are multiple scratchpad windows, this command cycles through them.
bindsym $mod+minus scratchpad show
#
# Resizing containers:
#
mode "resize" {
# left will shrink the containers width
# right will grow the containers width
# up will shrink the containers height
# down will grow the containers height
bindsym $left resize shrink width 10px
bindsym $down resize grow height 10px
bindsym $up resize shrink height 10px
bindsym $right resize grow width 10px

# Ditto, with arrow keys
bindsym Left resize shrink width 10px
bindsym Down resize grow height 10px
bindsym Up resize shrink height 10px
bindsym Right resize grow width 10px

# Return to default mode
bindsym Return mode "default"
bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"

#
# Status Bar:
#
# Read `man 5 sway-bar` for more information about this section.
# bar {
#     position top

#     # When the status_command prints a new line to stdout, swaybar updates.
#     # The default just shows the current date and time.
#     #status_command while date +'%Y-%m-%d %X'; do sleep 1; done

# colors {
#   statusline #cdd6f4
#   background #1e1e2e
#   inactive_workspace #1e1e2e00 #1e1e2e00 #a6adc8
# }
# }
# replace swaybar with waybar
# bar swaybar_command waybar
exec waybar

# window overlays
# exec rm -f /tmp/sovpipe && mkfifo /tmp/sovpipe && tail -f /tmp/sovpipe | sov -t 500

### Visual
#
default_border pixel 2

### Gaps
# Gaps
gaps inner 5
gaps outer 5

# Smart Gaps and Borders
smart_gaps off
smart_borders off

# Specific Gaps
gaps top 5
gaps right 5
gaps bottom 5
gaps left 5

### SwayFX
blur enable
corner_radius 10
shadows enable
shadows_on_csd enable
blur_xray disable
blur_passes 2
blur_radius 4
default_dim_inactive 0.3

### Workspace assingments
#
# I have a funciton calles get_appid in my shell to get the app id of a window
# also swaymsg -t get_tree will get you classes and the app id
#
# ws 2 - coding
#
assign [app_id="code-url-handler"] workspace number 2
assign [app_id="brave-github.com__search-Default - coding"] workspace number 2
assign [app_id="brave-search.nixos.org__packages-Default"] workspace number 2
assign [app_id="brave-home-manager-options.extranix.com__-Default"] workspace number 2
assign [app_id="brave-github.com__bashfulrobot_nixos-Default"] workspace number 2
#
# ws 3 - IM
#
assign [app_id="Slack"] workspace number 3
assign [app_id="brave-chat.developer.gov.bc.ca__channel_devops-sysdig-Default"] workspace number 3
#
# ws 8 - sysdig
#
assign [app_id="brave-sysdig.vitally.io__hubs_553ec776-875e-4a0e-a096-a3da3a0b6ea1_8acc40cb-e3ea-4da8-9570-4be27a10fff6-Default"] workspace number 8
assign [app_id="brave-sysdig.lightning.force.com__lightning_r_Account_001j000000xlClCAAU_view-Default"] workspace number 8
assign [app_id="brave-sysdig.atlassian.net__jira_software_c_projects_FR_issues-Default"] workspace number 8
assign [app_id="brave-sysdig.atlassian.net__wiki_spaces_~62200ee98a4bb60068f21eea_overview-Default"] workspace number 8
#
# ws 9 - office
#
assign [app_id="brave-calendar.google.com__calendar_u_1-Default"] workspace number 9
assign [app_id="brave-mail.google.com__mail_u_1_-Default"] workspace number 9
assign [class="Todoist"] workspace number 9
assign [app_id="brave-calendar.google.com__calendar_u_0-Default"] workspace number 9
assign [app_id="brave-mail.google.com__mail_u_0_-Default"] workspace number 9
# ws 10 - other
#
assign [app_id="1Password"] workspace number 10
#

# Enable xWayland
xwayland enable

include @sysconfdir@/sway/config.d/*